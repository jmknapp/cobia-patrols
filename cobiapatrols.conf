<VirtualHost *:80>
    ServerName cobiapatrols.com
    ServerAlias www.cobiapatrols.com
    
    # Redirect HTTP to HTTPS (uncomment after certbot setup)
    # RewriteEngine On
    # RewriteCond %{HTTPS} off
    # RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
    
    # Proxy to gunicorn
    ProxyPreserveHost On
    ProxyPass /static !
    ProxyPass / http://127.0.0.1:5003/
    ProxyPassReverse / http://127.0.0.1:5003/
    
    # Serve static files directly
    Alias /static /var/www/html/cobiapatrols/static
    <Directory /var/www/html/cobiapatrols/static>
        Require all granted
        Options -Indexes
        ExpiresActive On
        ExpiresDefault "access plus 1 day"
    </Directory>
    
    # Logging
    ErrorLog ${APACHE_LOG_DIR}/cobiapatrols_error.log
    CustomLog ${APACHE_LOG_DIR}/cobiapatrols_access.log combined
</VirtualHost>

